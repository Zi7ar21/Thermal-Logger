# Thermal Logger

Android/Linux `/sys/class/thermal` sysfs sensor data logger, written in C/C++. Basically, my Android device has temperature sensors accessible at `/sys/class/thermal_zoneX/temp` (where `X` is the number of the sensor) and I thought it would be cool to log it since there aren't any apps that can do it fast. This uses `clock_gettime()` for time measurements, for up to nanosecond-precision, however the actual measurements may not correspond to real-world time (e.g. UTC).

I was inspired to make this so I can use it in conjunction with [Android Raw GNSS Measurements](https://developer.android.com/develop/sensors-and-location/sensors/gnss), since `thermal_zone74` is "`xo-therm-usr`", which suggests it's the temperature of the phone's [XO](https://en.wikipedia.org/wiki/Crystal_oscillator). The frequency (and thus stability) of these oscillators drifts with temperature, [TCXO](https://en.wikipedia.org/wiki/Crystal_oscillator#Temperature)s (Temperature-compensated Crystal Oscillators) will compensate for this, however changes in temperature can decrease their short-term accuracy, which is important for GNSS because a clock error of 1 __**ppb**__ (parts per billion) can correspond to a pseudorange error of 0.299792458 meters/second! TCXOs are usually on the order of 1 __**ppm**__, meaning an uncorrected TCXO can drift upwards of 299.792458 meters/second (0.299792458 kilometers/second)! This is quite terrible, so the clock frequency offset is incorporated into the PVT solver, however any changes in oscillator frequency (like that caused by a change in temperature) will greatly degrade the accuracy. So, I hope to use this logger as another way of estimating the uncertainty of my Raw GNSS Measurements. I believe the clock uncertainty is the greatest source of error remaining in our Android devices (besides ionospheric delays and signal degredation), even the raw measurements can be affected by it.

It is entirely likely that Qualcomm (the vendor of my phone's SoC) is already correcting the clock using this sensor (or some lower-level access to it), however it should still be possible to see a correlation between temperature shifts collected using this logger and the PVT solutions.

Update: Holy crap, my phone can collect thermal measurments SUPER FAST. Throttled only by the ability to spam `fopen()` on `/sys/class/thermal_zone74/temp` (and buffered `fprintf()`s to a log) it ran at about ~750.6974892 Hz (not sure what the limit is)
